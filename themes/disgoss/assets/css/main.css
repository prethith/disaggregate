/* Fonts are defined in fonts.css, loaded separately via head/css.html */
/* footnotes.css is loaded separately via head/css.html */

:root {
    /* Colours */
    --c-bg:       #f7f4f0;   /* warm off-white — paper-like */
    --c-fg:       #28231e;   /* warm near-black */
    --c-fg-muted: #6e6560;   /* warm mid-gray for dates, captions */
    --c-border:   #d4ccc6;   /* warm rule color */
    --c-highlight: #1d27ed;  /* blue accent for hover / active states */

    --c-code-bg: #16161d;
    --c-code-fg: #c8c093;

    /* Backwards-compatible aliases used in templates */
    --light-bg: var(--c-bg);
    --light-fg: var(--c-fg);
    --highlight-color: var(--c-highlight);

    /* Typefaces */
    --font-heading: "CabinetGrotesk", sans-serif;  /* UI, nav, headings, dates */
    --font-body:    "Spectral", serif;             /* body text, article content, blog intro */

    /* ── Type Scale ──────────────────────────────────────────────────────────
       Major Third ratio (×1.25), base 18 px.
       Use only these tokens; do not add ad-hoc font-size values elsewhere.
       ──────────────────────────────────────────────────────────────────── */
    --fs-xs:   0.8rem;     /*  ~13 px — timestamps, fine print  */
    --fs-sm:   0.975rem;   /*   14 px — dates, footer, captions */
    --fs-md:   1.15rem;       /*   16 px — nav links, UI labels    */
    --fs-base: 1.3rem;    /*   20 px — body / article text     */
    --fs-lg:   1.375rem;   /*   22 px — section labels          */
    --fs-xl:   1.563rem;   /*   25 px — h2                      */
    --fs-2xl:  1.953rem;   /*   31 px — h1 / post title         */

    /* Line heights */
    --lh-tight:   1.2;
    --lh-normal:  1.3;
    --lh-relaxed: 1.45;

    /* Layout */
    --l--grid-width-narrow: 48rem;
    --l--grid-width-wide:   72rem;
}


/* ================================================================
   Reset
   ================================================================ */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}


/* ================================================================
   Base
   ================================================================ */
body {
    background-color: var(--c-bg);
    color: var(--c-fg);
    font-family: var(--font-body);
    font-size: var(--fs-base);
    line-height: var(--lh-relaxed);
    font-weight: 400;
    min-height: 100dvh;
    counter-reset: sidenote-counter;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

::selection {
    background-color: rgba(180, 140, 80, 0.2);   /* warm amber tint */
    color: inherit;
}

a {
    color: inherit;
    text-decoration: underline;
    text-underline-offset: 0.25em;
}

p {
    margin-block: 1.25rem;
}


/* ================================================================
   Headings  (CabinetGrotesk everywhere — UI / structural)
   ================================================================ */
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    font-weight: 500;
    line-height: var(--lh-tight);
}

/* Default article-level heading sizes (overridden in .content below) */
h2 { font-size: var(--fs-xl); }
h3 { font-size: var(--fs-lg); }
h4 { font-size: var(--fs-md); }
h5 { font-size: var(--fs-sm); }
h6 { font-size: var(--fs-xs); }

time {
    font-family: var(--font-heading);
    font-size: var(--fs-md);
    color: var(--c-fg-muted);
}


/* ================================================================
   Layout grid
   ================================================================ */
.grid {
    display: grid;
    grid-template-columns:
        [full-start] minmax(1rem, 1fr)
        [wide-start] minmax(0, calc((var(--l--grid-width-wide) - var(--l--grid-width-narrow)) / 2))
        [narrow-start] var(--l--grid-width-narrow) [narrow-end]
        minmax(0, calc((var(--l--grid-width-wide) - var(--l--grid-width-narrow)) / 2)) [wide-end]
        minmax(1rem, 1fr) [full-end];
    gap: 0 1rem;
}


nav > *,
main > *,
footer > * {
    grid-column: narrow;
}


/* ================================================================
   Nav
   ================================================================ */
nav {
    font-family: var(--font-heading);
    margin-top: 4rem;
}

nav ul {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 1rem;
    list-style: none;
}

nav a {
    font-size: var(--fs-md);
    text-decoration: none;
    color: var(--c-fg);
}

nav a:hover {
    color: var(--c-highlight);
}

nav a.active {
    font-weight: 500;
}


/* ================================================================
   Homepage
   ================================================================ */

/* Blog intro — rendered Markdown from index page; Spectral (body) */
.blog-intro {
    font-family: var(--font-body);
    font-size: var(--fs-base);
    line-height: var(--lh-relaxed);
    margin-block: 1rem;
}

/* "Latest posts" label + rule + "View all" row */
.posts-list-header {
    display: flex;
    align-items: baseline;
    gap: 1rem;
    font-family: var(--font-heading);
    margin-top: 3rem;
}

.section-title {
    font-family: var(--font-heading);
    font-size: var(--fs-sm);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    white-space: nowrap;
    margin: 0;
}

.header-line {
    flex: 1;
    height: 1px;
    background-color: var(--c-border);
}

.view-all-link {
    font-family: var(--font-heading);
    font-size: var(--fs-sm);
    text-decoration: none;
    color: var(--c-fg-muted);
    white-space: nowrap;
}

.view-all-link:hover {
    color: var(--c-highlight);
}

/* Legacy .view-all block — hidden */
.view-all {
    display: none;
}


/* ================================================================
   Post list  (homepage + /posts/)
   All list-level chrome is CabinetGrotesk
   ================================================================ */
.post-list {
    font-family: var(--font-heading);
    list-style: none;
    padding: 0;
    margin-top: 1.5rem;
}

.post-row {
    width: 100%;
    margin: 0.5rem 0;
    padding: 0;
}

.post-row a {
    display: block;
    text-decoration: none;
    color: inherit;
    cursor: pointer;
    padding: 0.15rem 0;
    transition: color 0.3s ease;
}

.post-meta-line {
    display: flex;
    flex-direction: row;
    gap: 0.75rem;
    align-items: baseline;
}

.post-date {
    font-family: var(--font-heading);
    font-size: var(--fs-sm);
    color: var(--c-fg-muted);
    white-space: nowrap;
    flex-shrink: 0;
}

.post-title {
    font-family: var(--font-heading);
    font-size: var(--fs-md);
    font-weight: 500;
    margin: 0;
}

.post-title:hover {
    color: var(--c-highlight);
}

.post-sep {
    display: none;
}

.post-description {
    font-family: var(--font-heading);
    font-size: var(--fs-md);
    color: var(--c-fg-muted);
    display: block;
    margin-top: 0.25rem;
    width: 100%;
}


/* ================================================================
   Footer
   ================================================================ */
.sitewide-footer {
    font-family: var(--font-heading);
    font-size: var(--fs-sm);
    color: var(--c-fg-muted);
    margin-top: 1.5rem;
    padding-block: 1rem;
}

.footer-inner {
    border-top: 1px solid var(--c-fg);
    padding-block: 1rem;
}


/* ================================================================
   Post page
   ================================================================ */
.post-header {
    font-family: var(--font-heading);
    margin-block: 1.5rem;
}

.post-header > h1 {
    font-size: clamp(var(--fs-xl), 2vw + 1rem, var(--fs-2xl));
    font-weight: 500;
    line-height: var(--lh-tight);
    margin-bottom: 0.5rem;
}

/* Article body — Spectral */
.content {
    font-family: var(--font-body);
    font-size: var(--fs-base);
    line-height: var(--lh-relaxed);
    text-wrap: pretty;
    hyphens: manual;
    max-width: 72ch;
    grid-column: full-start / full-end;
    align-content: start;
    display: grid;
    grid-template-columns: subgrid;
}


/* Make contents of content follow the narrow style */
.content > * {
    grid-column: narrow-start / narrow-end;
}

figure {
    margin: 1rem 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.square {
    grid-column: narrow-start / narrow-end;
}

.square > img {
    height: auto;
    width: 100%;
}

/* Figure goes wide */
.wide {
    grid-column: wide-start / wide-end;
}

.wide > img {
    height: auto;
    width: 100%;
}

figcaption {
    font-family: var(--font-heading);
    font-size: var(--fs-sm);
    color: var(--c-fg-muted);
    text-align: center;
    margin-top: 0.5rem;
}

/* In-article headings: CabinetGrotesk (structural, not prose) */
.content h2 {
    font-size: var(--fs-xl);
    margin-top: 2.5rem;
    margin-bottom: 0.75rem;
}

.content h3 {
    font-size: var(--fs-lg);
    margin-top: 2rem;
    margin-bottom: 0.5rem;
}

.content h4 {
    font-size: var(--fs-md);
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 0.25rem;
}


/* ================================================================
   Responsive — redefine scale tokens at the :root for mobile.
   All font-size declarations above use the tokens, so they
   automatically adapt; no need to repeat every selector.
   ================================================================ */
@media (max-width: 896px) {
    :root {
        --fs-md: 1rem;
        --fs-base: 1.15rem;    /* 18 px */
        --fs-lg:   1.25rem;     /* 20 px */
        --fs-xl:   1.5rem;      /* 24 px */
        --fs-2xl:  1.875rem;    /* 30 px */
    }

    .section-title {
        font-size: var(--fs-md);
    }

    nav {
        margin-top: 2rem;
    }

    .grid {
        grid-template-columns:
            [full-start] 0.4rem
            [wide-start narrow-start] minmax(0, 1fr) [narrow-end wide-end]
            0.4rem [full-end];
    }

    .content {
        max-width: 100%;
    }

    .wide {
        grid-column: narrow-start / narrow-end;
    }

    .posts-list-header {
        margin-top: 2rem;
    }

    .post-meta-line {
        flex-direction: column;
        gap: 0.25rem;
    }
}
